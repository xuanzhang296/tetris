package tetris;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;

import javax.imageio.ImageIO;
import javax.swing.JPanel;
import javax.swing.JFrame;

public class Tetris extends JPanel {
	public static final int ROWS = 20;
	public static final int COLS = 20;
	private int score;
	private int lines;
	private Cell[][] wall = new Cell [ROWS][COLS];
	private Tetromino tetromino;
	private Tetromino nextOne;
	private static BufferedImage background;
	private static BufferedImage overImage;
	public static BufferedImage T;
	public static BufferedImage S;
	public static BufferedImage Z;
	public static BufferedImage O;
	public static BufferedImage J;
	public static BufferedImage L;
	public static BufferedImage I;
	static{
		try{
			background = ImageIO.read(Tetris.class.getResource("tetris.png"));
			T = ImageIO.read(T.class.getResource("T.png"));
			J = ImageIO.read(T.class.getResource("J.png"));
			S = ImageIO.read(T.class.getResource("S.png"));
			Z = ImageIO.read(T.class.getResource("Z.png"));
			O = ImageIO.read(T.class.getResource("O.png"));
			L = ImageIO.read(T.class.getResource("L.png"));
			I = ImageIO.read(T.class.getResource("I.png"));
		}catch(Exception e){
			e.printStackTrace();
		}
	}
	public void paint(Graphics g){
		g.drawImage(background, 0, 0, null);
		g.translate(15,15);
		paintWall(g);
		paintTetromino(g);
	}
	/*public static void main(String[] args){
		JFrame frame = new JFrame();
		Tetris tetris = new Tetris();		
		frame.add(tetris);
		frame.setSize(700, 1050);
		frame.setLocationRelativeTo(null);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.setVisible(true);
		tetris.setBackground(new Color(0x0000ff));
		
	}*/
	public static final int CELL_SIZE = 26;
	private void paintWall(Graphics g){
		for(int row = 0; row < wall.length;row++){
			Cell[] line = wall[row];
			for(int col = 0; col < line.length; col++){
				Cell cell = line[col];
				int x = col*CELL_SIZE;
				int y = row*CELL_SIZE;
				if(cell == null){
					g.drawRect(x,y,CELL_SIZE,CELL_SIZE);
				}else{
					g.drawImage(cell.getImage(),x-1,y-1,null);
				}
				
			}
		}
	}
	public void paintTetromino(Graphics g){
		if(tetromino == null){
			return;
		}
		Cell[] cells = tetromino.cells;
		for(int i = 0; i < cells.length; i++){
			Cell cell = cells[i];
			int x = cell.getCol()*CELL_SIZE;
			int y = cell.getRow()*CELL_SIZE;
			g.drawImage(cell.getImage(), x-1, y-1, null);
		}
	}
}
